import{d as ge,r as Se,o as n,c as G,w,a as l,n as g,t as V,_ as Ve,b,u as Be,e as Te,l as je,f as Qe,s as Ie,g as Fe,h as u,i as a,j as _,k as p,F,m as N,A as Y,R as Ne,p as Ye,y as ue,T as Ue,M as ze}from"./index-a9bb2c77.js";import{F as Ee,_ as He}from"./FilterModal-3098a99c.js";import{_ as Ge,a as Ke}from"./delete-3bc6e9da.js";import{_ as We}from"./edit-ad45d112.js";import{e as Oe,c as de}from"./editorStore-477e7c0a.js";import{r as qe}from"./StarIcon-90da81a4.js";const Re="data:image/png;base64,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",De="/kiaofarming/assets/cityfarm_logo-3905cd1e.png",Je=["src"],Xe={class:"ml-2 align-middle text-3xl text-center text-white"},Ze=ge({__name:"ImageButton",props:{iconName:{type:String,default:""},title:{type:String,default:""},url:{type:String,default:""}},setup(P){const v=P,d=()=>{switch(v.title){case"葉菜":return"vegetableLeaves-bg";case"花果菜":return"cauliflower-bg";case"根莖菜":return"rootVegetables-bg";case"香辛料":return"spices-bg";case"香藥草":return"fragrantHerbs-bg";case"食用花卉":return"dinnerPlateFlowers-bg";case"五穀雜糧":return"wholeGrains-bg";case"觀葉植物":return"foliagePlants-bg";case"觀花植物":return"ornamentalPlants-bg";default:return"vegetableLeaves-bg"}};return(A,B)=>{const C=Se("router-link");return n(),G(C,{to:P.url},{default:w(()=>[l("div",null,[l("div",{class:g([d(),"my-3 ml-4 flex flex-row shadow-lg items-center all-button-style h-32"])},[l("img",{class:"-ml-12 object-cover",src:"./img/icons/farming/"+P.iconName,width:"150",alt:""},null,8,Je),l("span",Xe,V(P.title),1)],2)])]),_:1},8,["to"])}}});const $e=Ve(Ze,[["__scopeId","data-v-dd4469ba"]]),Me={key:0,class:"z-20 flex shrink-0 grow-0 justify-around dark:border-slate-600/60 fixed top-1/2 -translate-y-1/2 flex-col"},es=l("img",{class:"object-cover",src:Re,width:"44",alt:""},null,-1),ss=[es],ts={key:1,class:"flex justify-center mx-2"},ls=l("img",{class:"mt-5 object-center",src:De,width:"",alt:""},null,-1),is=[ls],rs={key:2,class:"mx-auto max-w-2xl py-8 sm:py-8 lg:max-w-4xl"},os={class:"grid mx-10 sm:grid-cols-2 sm:mx-8 lg:grid-cols-3 lg:items-start lg:gap-x-8 lg:mx-0"},as={class:"sm:col-span-2 lg:col-span-3 py-1 my-3 text-end text-lg text-gray-600"},ns={key:3,class:"mx-12 sm:mx-12"},cs={class:"flex flex-wrap items-center"},us=l("img",{class:"object-cover",src:He,width:"20",alt:""},null,-1),ds=l("p",{class:"ml-1 font-semibold text-lg"},"篩選條件",-1),gs=[us,ds],ms=l("p",{class:"py-1 my-3 font-semibold text-lg text-gray-900"},"類別",-1),fs={class:"my-2"},vs={class:"my-2"},bs=["onClick"],ys=l("img",{src:Ge,alt:"",class:"w-9 h-9"},null,-1),xs=["onClick"],_s=l("img",{src:We,alt:"",class:"w-5 h-5"},null,-1),ps=l("p",{class:"ml-2 text-sm"},"編輯",-1),ws=[_s,ps],As=["onClick"],Cs=l("img",{src:Ke,alt:"",class:"w-5 h-5"},null,-1),hs=l("p",{class:"ml-2 text-sm"},"刪除",-1),ks=[Cs,hs],Ps=["onClick"],Ls=["src"],Ss=["onClick"],Vs=["onClick"],Bs=l("p",{class:"mt-0.5 mr-2 block text-sm text-gray-500"},"種植難度",-1),Ts={class:"flex flex-auto justify-end"},js={class:"px-1 py-0.5 rounded-full bg-gray-300 text-center text-xs text-gray-700",disabled:"true"},zs=ge({__name:"MainView",setup(P){let v=b(!1),d=b(!1);const A=Be(),B=Te(),C=je(),me=Oe(),y=b([]),m=b([]),T=b(),j=b(!1),K=b(0),W=Qe(),{selectedAccount:O}=Ie(W),h=b({}),fe=e=>{h.value=e,Ce()},ve=e=>{switch(e.class){case"葉菜":return"vegetableLeaves-card-bg vegetableLeaves-card-hover";case"花果菜":return"cauliflower-card-bg cauliflower-card-hover";case"根莖菜":return"rootVegetables-card-bg rootVegetables-card-hover";case"香辛料":return"spices-card-bg spices-card-hover";case"香藥草":return"fragrantHerbs-card-bg fragrantHerbs-card-hover";case"食用花卉":return"dinnerPlateFlowers-card-bg dinnerPlateFlowers-card-hover";case"五穀雜糧":return"wholeGrains-card-bg wholeGrains-card-hover";case"觀葉植物":return"foliagePlants-card-bg foliagePlants-card-hover";case"觀花植物":return"ornamentalPlants-card-bg ornamentalPlants-card-hover";default:return"vegetableLeaves-card-bg vegetableLeaves-card-hover"}};function q(){v.value=!0}function be(){v.value=!1}function U(e){d.value=!0,A.push({name:"home",query:{category:e.name}}),D(e)}function z(){d.value=!1}function ye(e){const s=y.value.find(t=>e==t.name)??new de;console.log(s),d.value=!0,D(s)}function xe(){return d.value==!0?"main-filter-bg":"main-view-bg"}function _e(e){var s;return e.id==((s=T.value)==null?void 0:s.id)?"plant-position-selected":"plant-position-unselect"}function pe(){return j.value==!0?"plant-position-selected":"plant-position-unselect"}function R(){C.getClassList(Y.CLASS_TYPE_PLANTTYPE).subscribe(e=>{console.log(e),y.value=e;let s=y.value;for(let o=0;o<s.length;o++){let r=s[o];switch(r.id){case 1:r.iconName="vegetableLeaves.png";break;case 2:r.iconName="cauliflower.png";break;case 3:r.iconName="rootVegetables.png";break;case 4:r.iconName="spices.png";break;case 5:r.iconName="fragrantHerbs.png";break;case 6:r.iconName="dinnerPlateFlowers.png";break;case 7:r.iconName="wholeGrains.png";break;case 8:r.iconName="foliagePlants.png";break;case 9:r.iconName="ornamentalPlants.png";break}}y.value=s;const t=B.query.category;t&&t!=""&&t!="all"?he(t):z(),Le()})}function we(e){let s="";return(e!=null&&e.includes(3)||e!=null&&e.includes(4)||e!=null&&e.includes(5))&&(s=s+"春"),(e!=null&&e.includes(6)||e!=null&&e.includes(7)||e!=null&&e.includes(8))&&(s=s+"夏"),(e!=null&&e.includes(9)||e!=null&&e.includes(10)||e!=null&&e.includes(11))&&(s=s+"秋"),(e!=null&&e.includes(12)||e!=null&&e.includes(1)||e!=null&&e.includes(2))&&(s=s+"冬"),s=="春夏秋冬"&&(s="全年"),s}function D(e){C.getDataList(Y.GET_LIST_TYPE_PLANTS,e.id).subscribe(s=>{T.value=e,j.value=!1,m.value=s})}function Ae(){C.getDataList(Y.GET_LIST_TYPE_PLANTS,0).subscribe(e=>{j.value=!0,T.value=void 0,m.value=e,A.push({name:"home",query:{category:"all"}})})}function Ce(){C.getDataList(Y.GET_LIST_TYPE_PLANTS,0).subscribe(e=>{console.log(e),j.value=!1,T.value=void 0,m.value=e;let s=h.value.level,t=[];const o=B.query.category;console.log(o),o!=null&&o!="all"?m.value=m.value.filter(i=>i.class==o):m.value=e,s==null||s.length==0?t=m.value:t=m.value.filter(i=>s==null?void 0:s.some(f=>i.plantingDifficulty===f.rating));let r=h.value.season,c=[];r==null||r.length==0?c=t:c=t.filter(i=>{var $,M,ee,se,te,le,ie,re,oe,ae,ne,ce;const f=(($=i.plantMonth)==null?void 0:$.includes(3))||((M=i.plantMonth)==null?void 0:M.includes(4))||((ee=i.plantMonth)==null?void 0:ee.includes(5)),J=((se=i.plantMonth)==null?void 0:se.includes(6))||((te=i.plantMonth)==null?void 0:te.includes(7))||((le=i.plantMonth)==null?void 0:le.includes(8)),X=((ie=i.plantMonth)==null?void 0:ie.includes(9))||((re=i.plantMonth)==null?void 0:re.includes(10))||((oe=i.plantMonth)==null?void 0:oe.includes(11)),Z=((ae=i.plantMonth)==null?void 0:ae.includes(12))||((ne=i.plantMonth)==null?void 0:ne.includes(1))||((ce=i.plantMonth)==null?void 0:ce.includes(2));return r==null?void 0:r.some(I=>I.id==1?f&&J&&X&&Z:I.id==2?f:I.id==3?J:I.id==4?X:Z)});let x=h.value.cyopLifeCycle,Q=[];x==null||x.length==0?Q=c:Q=c.filter(i=>x==null?void 0:x.some(f=>i.cropLifeCycle===f.id));let k=h.value.lightCondition,L=[];console.log(k),k==null||k.length==0?L=Q:L=Q.filter(i=>k==null?void 0:k.some(f=>{if(i.lightConditions!=null)return i.lightConditions.includes(f.id)})),console.log(L);let S=h.value.place,H=[];S==null||S.length==0?H=L:H=L.filter(i=>S==null?void 0:S.some(f=>{if(i.places!=null)return i.places.includes(f.id)})),m.value=H,d.value=!0})}function he(e){const s=y.value.find(t=>t.name==e)??new de;U(s)}function E(e){console.log(e),A.push({name:"vegetable-recommendation",params:{id:e.id}})}function ke(e){e&&A.push({name:"edit-plant",query:{id:e.id,isEdit:"Y"}})}function Pe(e){me.deletePlantInfo(e.id).subscribe(s=>{R()})}function Le(){W.getPersonNumber().subscribe(e=>{console.log(e),K.value=e.values[11][1]})}return Fe(()=>{z(),R()}),A.afterEach((e,s,t)=>{const o=B.query.category;console.log(o),o==null?z():o!="all"&&ye(o)}),(e,s)=>(n(),u("div",{class:g(xe())},[a(d)?_("",!0):(n(),u("nav",Me,[l("button",{onClick:s[0]||(s[0]=t=>q()),class:"flex aspect-square flex-col"},ss)])),p(Ee,{show:a(v),onClose:s[1]||(s[1]=t=>be()),onSelectCondition:fe},null,8,["show"]),a(d)?_("",!0):(n(),u("div",ts,is)),a(d)?_("",!0):(n(),u("div",rs,[l("div",os,[(n(!0),u(F,null,N(y.value,t=>(n(),G($e,{iconName:t.iconName,title:t.name,onClick:o=>U(t),class:"my-3 sm:mx-4 lg:mx-0"},null,8,["iconName","title","onClick"]))),256)),l("p",as,"瀏覽人數: "+V(K.value),1)])])),a(d)?(n(),u("div",ns,[l("div",{class:g(a(v)?"modal-open":"")},[l("div",cs,[a(v)?_("",!0):(n(),u("button",{key:0,class:"flex items-center mx-2 px-2 py-0.5 text-base h-8 filter-btn-style",onClick:s[2]||(s[2]=t=>q())},gs)),ms,l("div",fs,[l("button",{class:g([pe(),"mx-2 px-2 py-0.5 text-lg"]),onClick:s[3]||(s[3]=t=>Ae())},"全部",2)]),(n(!0),u(F,null,N(y.value,t=>(n(),u("div",vs,[l("button",{class:g([_e(t),"mx-2 px-2 py-0.5 text-lg"]),onClick:o=>U(t)},V(t.name),11,bs)]))),256))]),l("ul",{role:"list",class:g(a(v)?"grid grid-cols-1 gap-x-4 gap-y-8 mt-8 sm:grid-cols-2 sm:gap-x-6 lg:grid-cols-4 xl:gap-x-16":"grid grid-cols-1 gap-x-4 gap-y-8 mt-8 sm:grid-cols-3 sm:gap-x-6 lg:grid-cols-5 xl:gap-x-16")},[(n(!0),u(F,null,N(m.value,t=>{var o,r;return n(),u("li",{class:"relative",onClick:s[5]||(s[5]=()=>{})},[l("div",{class:g([ve(t),"aspect-w-10 w-full h-40 overflow-hidden rounded-3xl focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 focus-within:ring-offset-gray-100 hover:border hover:shadow-md"])},[(o=a(O))!=null&&o.isAdmin?(n(),G(a(ze),{key:0,as:"div",class:"flex justify-end"},{default:w(()=>[p(a(Ne),{class:"edit-color mx-1 my-1",onClick:s[4]||(s[4]=()=>{})},{default:w(()=>[ys]),_:1}),p(Ue,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:w(()=>[p(a(Ye),{class:"absolute z-10 mt-10 w-36 origin-top-right rounded-xl bg-white py-3 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:w(()=>[p(a(ue),null,{default:w(({active:c})=>[l("button",{class:g([[c?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"],"flex w-full"]),onClick:x=>ke(t)},ws,10,xs)]),_:2},1024),p(a(ue),null,{default:w(({active:c})=>[l("button",{class:g([[c?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"],"flex w-full"]),onClick:x=>Pe(t)},ks,10,As)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):_("",!0),l("div",{class:"flex justify-center w-full h-full",onClick:c=>E(t)},[t.image!=null?(n(),u("img",{key:0,src:t.image[0],alt:"",class:g([[(r=a(O))!=null&&r.isAdmin?"-mt-20":"mt-0"],"pointer-events-none object-contain object-center w-52 bg-primary-300 group-hover:opacity-75"])},null,10,Ls)):_("",!0)],8,Ps)],2),l("p",{class:"pointer-events-none mt-2 block truncate text-lg font-medium text-gray-900 w-full",onClick:c=>E(t)},V(t.name),9,Ss),l("div",{class:"flex mt-2 w-full",onClick:c=>E(t)},[Bs,(n(),u(F,null,N([0,1,2],c=>p(a(qe),{key:c,class:g([t.plantingDifficulty>c?"start-yellow-color":"text-gray-400","h-5 w-5 flex-shrink-0"]),"aria-hidden":"true"},null,8,["class"])),64)),l("div",Ts,[l("button",js,V(we(t.plantMonth)),1)])],8,Vs)])}),256))],2)],2)])):_("",!0)],2))}});export{zs as default};
