import{d as m,b as o,E as l,o as f,h,G as g,a as k}from"./index-a9bb2c77.js";const w=k("i",{class:"fa-brands fa-line"},null,-1),x=m({__name:"LineLoginView",setup(y){const t=o("2000101263"),a=o("/kiaofarming/"),d=o("1d5840320e73e16f428c76c225d80432");function u(){let e="https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id="+t.value+"&redirect_uri="+a.value+"&state=login&scope=openid%20profile";console.log(e)}return(async()=>{try{const e=window.location.search,i=new URLSearchParams(e).get("code"),s=require("qs"),c=await l.post("https://api.line.me/oauth2/v2.1/token",s.stringify({grant_type:"authorization_code",code:i,redirect_uri:a.value,client_id:t.value,client_secret:d.value}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}),p=c.data.access_token,_=c.data.id_token,r=await l.post("https://api.line.me/oauth2/v2.1/verify",s.stringify({id_token:_,client_id:t.value}),{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+p}}),v=r.data.sub,L=r.data.name,T=1}catch(e){console.log(e)}})(),(e,n)=>(f(),h("button",{class:"medium_button btn_p08_user_loginType",id:"lineLoginBtn",onClick:n[0]||(n[0]=i=>u())},[w,g(" LINE ")]))}});export{x as default};
